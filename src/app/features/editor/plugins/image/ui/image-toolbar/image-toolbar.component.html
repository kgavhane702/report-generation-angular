<div class="image-toolbar" *ngIf="isActive">
  <!-- Group: Replace Image -->
  <div class="image-toolbar__group">
    <button
      type="button"
      class="image-toolbar__button image-toolbar__button--wide"
      (mousedown)="onReplaceImage($event)"
      title="Replace image"
    >
      <app-icon name="upload_file"></app-icon>
      <span class="image-toolbar__button-label">Replace</span>
    </button>
  </div>

  <div class="image-toolbar__separator"></div>

  <!-- Group: Fit Mode -->
  <div class="image-toolbar__group">
    <span class="image-toolbar__field-label">Fit:</span>
    <button
      type="button"
      class="image-toolbar__button"
      [class.image-toolbar__button--active]="currentFit === 'contain'"
      (mousedown)="onFitChange('contain', $event)"
      title="Contain - fit entire image"
    >
      <app-icon name="fit_contain"></app-icon>
    </button>
    <button
      type="button"
      class="image-toolbar__button"
      [class.image-toolbar__button--active]="currentFit === 'cover'"
      (mousedown)="onFitChange('cover', $event)"
      title="Cover - fill bounds, crop if needed"
    >
      <app-icon name="fit_cover"></app-icon>
    </button>
    <button
      type="button"
      class="image-toolbar__button"
      [class.image-toolbar__button--active]="currentFit === 'stretch'"
      (mousedown)="onFitChange('stretch', $event)"
      title="Stretch - stretch to fill"
    >
      <app-icon name="fit_stretch"></app-icon>
    </button>
  </div>

  <div class="image-toolbar__separator"></div>

  <!-- Group: Flip & Rotate -->
  <div class="image-toolbar__group">
    <button
      type="button"
      class="image-toolbar__button"
      [class.image-toolbar__button--active]="isFlippedHorizontal"
      (mousedown)="onFlipHorizontal($event)"
      title="Flip horizontal"
    >
      <app-icon name="flip_horizontal"></app-icon>
    </button>
    <button
      type="button"
      class="image-toolbar__button"
      [class.image-toolbar__button--active]="isFlippedVertical"
      (mousedown)="onFlipVertical($event)"
      title="Flip vertical"
    >
      <app-icon name="flip_vertical"></app-icon>
    </button>
    <div class="image-toolbar__mini-separator"></div>
    <button
      type="button"
      class="image-toolbar__button"
      (mousedown)="onRotateLeft($event)"
      title="Rotate left 90°"
    >
      <app-icon name="rotate_left"></app-icon>
    </button>
    <button
      type="button"
      class="image-toolbar__button"
      (mousedown)="onRotateRight($event)"
      title="Rotate right 90°"
    >
      <app-icon name="rotate_right"></app-icon>
    </button>
  </div>

  <div class="image-toolbar__separator"></div>

  <!-- Group: Opacity -->
  <div class="image-toolbar__group">
    <span class="image-toolbar__field-label">Opacity:</span>
    <input
      #opacityInput
      type="range"
      class="image-toolbar__slider"
      [value]="opacity"
      min="0"
      max="100"
      step="1"
      (input)="onOpacityChange($event)"
      title="Opacity"
    />
    <span class="image-toolbar__value">{{ opacity }}%</span>
  </div>

  <div class="image-toolbar__separator"></div>

  <!-- Group: Border -->
  <div class="image-toolbar__group">
    <app-border-picker
      title="Border"
      [colorPalette]="colorPalette"
      [value]="borderValue"
      (valueChange)="onBorderValueChange($event)"
    ></app-border-picker>
  </div>
</div>
