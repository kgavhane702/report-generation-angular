<div class="table-grid-selector">
  <button 
    type="button" 
    class="table-grid-selector__trigger"
    (click)="toggleDropdown()"
    title="Insert Table"
  >
    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
      <line x1="3" y1="9" x2="21" y2="9"></line>
      <line x1="3" y1="15" x2="21" y2="15"></line>
      <line x1="9" y1="3" x2="9" y2="21"></line>
      <line x1="15" y1="3" x2="15" y2="21"></line>
    </svg>
    <span class="table-grid-selector__label">Table</span>
    <svg class="table-grid-selector__caret" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <polyline points="6 9 12 15 18 9"></polyline>
    </svg>
  </button>

  <div 
    class="table-grid-selector__dropdown"
    *ngIf="isOpen()"
  >
    <div class="table-grid-selector__header">
      {{ selectionLabel }}
    </div>
    
    <div 
      class="table-grid-selector__grid"
      (mouseleave)="onGridLeave()"
    >
      <div 
        *ngFor="let rowIndex of gridRows"
        class="table-grid-selector__row"
      >
        <div
          *ngFor="let colIndex of gridColumns"
          class="table-grid-selector__cell"
          [class.table-grid-selector__cell--selected]="isCellSelected(rowIndex, colIndex)"
          (mouseenter)="onCellHover(rowIndex, colIndex)"
          (click)="onCellClick(rowIndex, colIndex)"
        ></div>
      </div>
    </div>
  </div>

  <div 
    class="table-grid-selector__backdrop"
    *ngIf="isOpen()"
    (click)="onBackdropClick($event)"
  ></div>
</div>

