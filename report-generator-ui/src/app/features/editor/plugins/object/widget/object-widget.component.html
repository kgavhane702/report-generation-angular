<div class="object-widget" (click)="onShapeClick()">
  <!-- CSS-renderable shapes (rectangle, circle, ellipse, square, rounded-rectangle) -->
  <div
    *ngIf="isCssShape"
    class="object-widget__shape object-widget__shape--css"
    [ngClass]="shapeClass"
    [style.background-color]="fillColor || null"
    [style.opacity]="opacity"
    [style.border]="borderStyle"
    [style.border-radius]="borderRadius"
  ></div>

  <!-- SVG-renderable shapes (all complex shapes) -->
  <svg
    *ngIf="isSvgShape"
    class="object-widget__shape object-widget__shape--svg"
    [class.object-widget__shape--line]="isLineShape"
    [attr.viewBox]="svgViewBox"
    preserveAspectRatio="none"
    [style.opacity]="opacity"
  >
    <path
      [attr.d]="svgPath"
      [attr.fill]="svgFill"
      [attr.stroke]="isLineShape ? effectiveStrokeColor : (strokeWidth > 0 ? strokeColor : 'none')"
      [attr.stroke-width]="isLineShape ? effectiveStrokeWidth : strokeWidth"
      [attr.stroke-dasharray]="svgStrokeDasharray"
      [attr.stroke-linecap]="isLineShape ? 'round' : 'butt'"
      vector-effect="non-scaling-stroke"
    />
  </svg>

  <!-- Text content overlay for editable shapes -->
  <div
    *ngIf="supportsText"
    class="object-widget__text-container"
    [attr.data-v-align]="verticalAlign"
    [style.padding.px]="textPadding"
    [style.text-align]="textAlign"
    (click)="$event.stopPropagation(); focusEditor()"
  >
    <app-editastra-editor
      [html]="localHtml()"
      [placeholder]="placeholder"
      variant="table"
      editorClass="object-widget__editor"
      [editorStyles]="{ 'text-align': textAlign }"
      (editorFocus)="onEditorFocus()"
      (editorBlur)="onEditorBlur()"
      (htmlInput)="onEditorInput($event)"
    ></app-editastra-editor>
  </div>
</div>
