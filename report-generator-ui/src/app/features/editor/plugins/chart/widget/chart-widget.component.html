<div
  class="chart-widget"
  (dblclick)="onDoubleClick($event)"
  title="Double-click to configure chart"
  [style.background-color]="backgroundColor || null"
>
  <div #container class="chart-widget__container" style="width: 100%; height: 100%; cursor: pointer;"></div>

  <div *ngIf="showLoadingOverlay" class="chart-widget__loading-overlay" aria-live="polite" aria-busy="true">
    <div class="chart-widget__loading-spinner"></div>
    <div class="chart-widget__loading-text">{{ loadingMessage }}</div>
  </div>
</div>

<app-modal
  *ngIf="dialogData"
  [(open)]="showDialog"
  size="xl"
  (closed)="onModalClosed()"
>
  <ng-container appModalHeader>
    <h2 class="chart-config-dialog__title">Chart Configuration</h2>
  </ng-container>

  <ng-container appModalBody>
    <app-chart-config-form
      #cfgForm="chartConfigForm"
      [data]="dialogData"
      (closed)="closeConfigDialog($event)"
    ></app-chart-config-form>
  </ng-container>

  <ng-container appModalFooter>
    <button
      type="button"
      class="chart-config-dialog__button chart-config-dialog__button--secondary"
      (click)="cfgForm.cancel()"
    >
      Cancel
    </button>
    <button
      type="button"
      class="chart-config-dialog__button chart-config-dialog__button--primary"
      (click)="cfgForm.save()"
      [disabled]="cfgForm.form.invalid"
    >
      Save
    </button>
  </ng-container>
</app-modal>

